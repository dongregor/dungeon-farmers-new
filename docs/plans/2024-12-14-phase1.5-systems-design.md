# Phase 1.5 Systems Design

**Date:** 2024-12-14
**Status:** Brainstormed, ready for implementation after Phase 1 MVP
**Related:** GAME_DESIGN_V2.md, Phase 1 MVP plans

> ⚠️ **When implementing:** Follow patterns in `docs/plans/BEST_PRACTICES_REVIEW.md`

---

## Overview

Phase 1.5 systems are "nice to have" features that enhance the core experience but don't block MVP launch. These should be implemented after the core loop is functional.

---

## 1. Tutorial Flow

### Philosophy: Hybrid Approach
Quick mandatory intro gets players into the loop fast, optional mentor quests guide deeper learning.

### Mandatory Intro (~2 minutes)

1. Name your Guild Master
2. Send GM on tutorial expedition (instant complete)
3. See expedition log + loot
4. "You're ready. Check mentor quests for more."

Players see the complete loop (expedition → log → loot) before being set free.

### Mentor Quest System

**Structure:** Always visible checklist
- All quests visible from start
- Grayed out with unlock conditions shown
- Players see full scope, work toward what interests them
- Self-directed learning

**Reward Tiers:**
- Early quests: Resources (gold, gear)
- Mid quests: One-time boosts (free recruit, free refresh)
- Final quest: Exclusive title/cosmetic

### Mentor Quest List

**Early Quests (unlock: immediate)**

| Quest | Task | Reward |
|-------|------|--------|
| First Steps | Complete tutorial expedition | 100g |
| Open for Business | Visit the tavern | 50g |
| New Blood | Recruit your first hero | 150g + basic weapon |
| Stronger Together | Send a 2+ hero party | 200g |
| Spoils of War | Equip an item on any hero | Basic armor piece |

**Mid Quests (unlock: various conditions)**

| Quest | Unlock | Task | Reward |
|-------|--------|------|--------|
| Know Your Team | Recruit 3 heroes | Read a hero's full profile | 250g |
| Counter Play | Complete 5 expeditions | Match a tag to a threat | Free tavern refresh |
| Explorer | Unlock 2 zones | Discover a subzone | 300g + materials |
| Dressed for Success | Own 5 equipment pieces | Equip a full set on one hero | Free recruitment (once) |
| Rest & Recovery | Have a tired hero | Let a hero recover to Content | 200g |

**Late Quests (unlock: progression milestones)**

| Quest | Unlock | Task | Reward |
|-------|--------|------|--------|
| Veteran | Any hero reaches level 10 | View prestige screen | 500g |
| Team Builder | Own 5+ heroes | Save a party preset | Free tavern refresh |
| Moving On | Own 6+ heroes | Retire a hero | 300g + their gold value |
| Completionist | Complete all above | - | Title: "The Prepared" |

---

## 2. Economy Balance

### Philosophy: Sink-Driven Economy
Gold flows generously, but meaningful sinks keep it valuable. Players feel rich but always have something to spend on.

### Income by Content Type

**Exploration favored** - keeps core loop rewarding:
- Exploration: Best gold/hour
- Dungeons: Best loot/materials
- Quests: One-time big payouts + unlocks
- Stationing: Low but passive

**Base Income by Duration (Zone 1, exploration):**

| Duration | Gold Range |
|----------|------------|
| 15 min | 30-50g |
| 30 min | 70-100g |
| 1 hr | 150-200g |
| 2 hr | 350-450g |

Scales with zone difficulty and tier.

### Gold Sinks

**Small Sinks (frequent use, 50-200g)**

| Sink | Cost | Notes |
|------|------|-------|
| Tavern refresh | 75g | Scales +25g per refresh/day |
| Quick recover (tired→content) | 100g | Skip 1hr wait |
| Expedition speed-up (10%) | 50g | Per expedition |

**Medium Sinks (regular use, 200-800g)**

| Sink | Cost | Notes |
|------|------|-------|
| Equipment upgrade (Normal→Magic) | 300g | + materials |
| Equipment upgrade (Magic→Perfect) | 600g | + rare materials |
| Reroll equipment trait | 400g | Random new trait |
| Cleanse minor curse | 200g | |
| Cleanse major curse | 500g | |

**Large Sinks (investments, 1000-3000g)**

| Sink | Cost | Notes |
|------|------|-------|
| Unlock tavern slot | 1500g | Permanent |
| Unlock party preset slot | 1000g | Permanent |
| Unlock difficulty tier | 2000g | + power requirement |
| Reroll hero negative trait | 2500g | Random replacement |

**Aspirational Sinks (endgame, 5000g+)**

| Sink | Cost | Notes |
|------|------|-------|
| Add hero trait slot | 8000g | Once per hero |
| Targeted trait reroll | 5000g | Pick trait category |
| Instant prestige recovery | 10000g | Skip prestige downtime |

---

## 3. Passive Stationing

### Philosophy
Heroes not on expeditions can be stationed in discovered zones for idle income. Ties into zone mastery system.

### What Stationed Heroes Generate

- **Zone resources:** Materials tied to zone's biome
- **Familiarity progress:** Slowly builds zone/subzone familiarity
- **Subzone discovery:** Chance to discover subzones over time
- **Quest hooks:** Chance to generate quests from scouting

No gold from stationing - exploration stays king for income.

### Duration

**Until morale drops** - heroes station until they hit "Tired" or "Frustrated"
- Creates natural rotation
- High-survival heroes last longer (valuable for stationing)
- Prevents "station everyone forever" cheese

### Limits

**Global cap + zone limits:**

| Progression | Global Cap | Per Zone |
|-------------|------------|----------|
| Early game | 3 heroes | 1 max |
| Mid game | 6 heroes | 2 max |
| Late game | 10 heroes | 2 max |

Encourages breadth - explore more zones to station more heroes.

---

## 4. Notification System

### Philosophy
Opt-in push notifications + daily digest option. Players control their experience.

### Notification Categories

**Expedition Events**

| Event | Default | Notes |
|-------|---------|-------|
| Expedition complete | ON | Core loop |
| Choices waiting | ON | Need player input |
| Auto-repeat stopped (inventory full) | ON | Action needed |
| Rare drop found | OFF | Nice-to-know |

**Hero Events**

| Event | Default | Notes |
|-------|---------|-------|
| Hero exhausted | OFF | Check when playing |
| Hero level up | OFF | Frequent, noisy |
| Hero ready to prestige | ON | Milestone |
| Stationed hero tired | OFF | Batch in digest |

**Tavern Events**

| Event | Default | Notes |
|-------|---------|-------|
| Free refresh available | OFF | Every 8 hours is too much |
| Rare+ hero appeared | ON | Don't miss good ones |
| Locked hero expiring | ON | Prevent loss |

**System Events**

| Event | Default | Notes |
|-------|---------|-------|
| Daily digest | ON | Summary option |
| Quest completed | OFF | Check in-game |
| New zone unlocked | ON | Progression milestone |

### Daily Digest

Optional morning summary:
- "Yesterday: 5 expeditions, 2 level-ups, 1 rare drop"
- Plus critical alerts for queued choices
- Minimal interruption for players who prefer less noise

---

## 5. Achievement System

### Philosophy
Separate from hero titles. Titles are hero accomplishments, achievements are account milestones.

### Rewards: Unlocks + Cosmetics

No percentage bonuses - keeps it fair for new players.

- Early achievements: One-time resources
- Mid achievements: Unlock features (extra preset slot, station slot)
- Endgame achievements: Exclusive cosmetics, profile titles

### Categories (Tiered: Bronze → Silver → Gold → Platinum)

| Category | Tracks | Bronze | Silver | Gold | Platinum |
|----------|--------|--------|--------|------|----------|
| Explorer | Expeditions completed | 10 | 100 | 500 | 2000 |
| Collector | Unique heroes recruited | 5 | 25 | 75 | 150 |
| Hoarder | Equipment pieces owned | 20 | 100 | 300 | 750 |
| Storyteller | Story traits discovered | 10 | 50 | 150 | 300 |
| Master | Zones fully mastered | 1 | 3 | 7 | 12 |
| Veteran | Heroes prestiged | 1 | 5 | 15 | 30 |
| Merchant | Gold earned (lifetime) | 10k | 100k | 500k | 2M |
| Challenger | Highest difficulty cleared | Tier 3 | Tier 5 | Tier 7 | Tier 10 |

### Hidden Achievements

Discovered through play, not shown until triggered:

| Achievement | Trigger |
|-------------|---------|
| Oops | Retire a legendary hero |
| Against All Odds | Clear hard content with all-common party |
| Cheese Enthusiast | Collect 5 cheese-related story traits |
| Night Shift | Complete 100 expeditions between midnight-6am |
| Full House | Have 5 heroes with contradictory traits |
| Lucky Find | Discover a rare subzone on first zone visit |
| Minimalist | Clear a dungeon with single hero |

### Guild Page Display (Flex System)

| Element | Description |
|---------|-------------|
| Trophy Case | Select 3-6 achievements to showcase |
| Stat Banner | Key lifetime stats (expeditions, heroes, gold) |
| Rarest Badge | Auto-displays your rarest achievement |
| Completion Bar | Overall achievement % |
| Hidden Counter | "X/? secrets discovered" |

---

## 6. Daily/Weekly Content

### Philosophy: Challenge Board
Bonus opportunities, not exclusive content. No FOMO - missing a day means missing bonus rewards, not unique content.

### Daily Challenges

Refresh every 24 hours at server reset. Complete for bonus rewards.

**Example Daily Challenges:**

| Challenge | Reward |
|-----------|--------|
| Complete 3 expeditions | 100g |
| Use a hero with Combat 6+ | 75g |
| Discover a subzone | 150g + materials |
| Complete an expedition under 30min | 50g |
| Send a full party (4 heroes) | 100g |

**Daily Slots:** 3 challenges per day, pick any to complete.

### Weekly Challenges

Refresh every 7 days. Larger scope, better rewards.

**Example Weekly Challenges:**

| Challenge | Reward |
|-----------|--------|
| Complete 20 expeditions | 500g |
| Recruit 2 heroes | 300g + free refresh |
| Level up any hero 3 times | 400g |
| Complete expeditions in 3 different zones | 350g + materials |
| Earn 2000g total | 250g bonus |

**Weekly Slots:** 5 challenges per week, all completable.

### Challenge Board UI

- Visible from main screen (badge if unclaimed rewards)
- Shows progress on each challenge
- Claim button when complete
- Timer until next refresh
- No penalty for incomplete challenges - they just reset

---

## TypeScript Interfaces

```typescript
// Tutorial System
interface MentorQuest {
  id: string;
  name: string;
  description: string;
  task: string;
  unlockCondition: QuestUnlockCondition;
  reward: QuestReward;
  completed: boolean;
}

interface QuestUnlockCondition {
  type: 'immediate' | 'heroes_recruited' | 'expeditions_completed' |
        'hero_level' | 'zones_unlocked' | 'equipment_owned';
  value?: number;
}

interface QuestReward {
  gold?: number;
  equipment?: EquipmentReward;
  freeRefresh?: boolean;
  freeRecruitment?: boolean;
  title?: string;
}

// Economy
interface GoldSink {
  id: string;
  name: string;
  baseCost: number;
  scalingType: 'fixed' | 'per_day' | 'per_use';
  scalingAmount?: number;
  category: 'small' | 'medium' | 'large' | 'aspirational';
}

// Stationing
interface StationedHero {
  heroId: string;
  zoneId: string;
  stationedAt: Date;
  accumulatedResources: ResourceBundle;
  familiarityGained: number;
  pendingDiscoveries: Discovery[];
  pendingQuests: QuestHook[];
}

interface StationingLimits {
  globalCap: number;
  perZoneCap: number;
}

// Notifications
interface NotificationSettings {
  expeditionComplete: boolean;
  choicesWaiting: boolean;
  autoRepeatStopped: boolean;
  rareDropFound: boolean;
  heroExhausted: boolean;
  heroLevelUp: boolean;
  heroReadyToPrestige: boolean;
  stationedHeroTired: boolean;
  freeRefreshAvailable: boolean;
  rareHeroAppeared: boolean;
  lockedHeroExpiring: boolean;
  dailyDigest: boolean;
  questCompleted: boolean;
  newZoneUnlocked: boolean;
}

interface DailyDigest {
  date: Date;
  expeditionsCompleted: number;
  heroesLeveledUp: number;
  rareDrops: LootItem[];
  goldEarned: number;
  pendingChoices: number;
}

// Achievements
type AchievementTier = 'bronze' | 'silver' | 'gold' | 'platinum';

interface Achievement {
  id: string;
  category: AchievementCategory;
  name: string;
  description: string;
  tiers: AchievementTierDefinition[];
  currentProgress: number;
  currentTier: AchievementTier | null;
  hidden: boolean;
  discovered: boolean;
}

interface AchievementTierDefinition {
  tier: AchievementTier;
  threshold: number;
  reward: AchievementReward;
}

interface AchievementReward {
  gold?: number;
  unlockSlot?: 'tavern' | 'preset' | 'station';
  cosmetic?: CosmeticReward;
  profileTitle?: string;
}

type AchievementCategory =
  | 'explorer' | 'collector' | 'hoarder' | 'storyteller'
  | 'master' | 'veteran' | 'merchant' | 'challenger';

interface GuildPageDisplay {
  trophyCase: string[]; // Achievement IDs (3-6)
  statBanner: GuildStats;
  rarestBadge: string | null;
  completionPercent: number;
  hiddenDiscovered: number;
  hiddenTotal: number;
}

interface GuildStats {
  totalExpeditions: number;
  totalHeroesRecruited: number;
  totalGoldEarned: number;
  highestDifficultyCleared: number;
  accountAge: number; // days
}

// Daily/Weekly Challenges
interface Challenge {
  id: string;
  type: 'daily' | 'weekly';
  name: string;
  description: string;
  requirement: ChallengeRequirement;
  reward: ChallengeReward;
  progress: number;
  completed: boolean;
  claimed: boolean;
}

interface ChallengeRequirement {
  type: 'expeditions' | 'hero_stat' | 'subzone' | 'duration' |
        'party_size' | 'recruits' | 'level_ups' | 'zones' | 'gold_earned';
  target: number;
  condition?: Record<string, unknown>;
}

interface ChallengeReward {
  gold: number;
  materials?: ResourceBundle;
  freeRefresh?: boolean;
}

interface ChallengeBoard {
  dailyChallenges: Challenge[];
  weeklyChallenges: Challenge[];
  dailyResetAt: Date;
  weeklyResetAt: Date;
}
```

---

## Implementation Priority

Within Phase 1.5, suggested order:

1. **Tutorial Flow** - Critical for new player retention
2. **Economy Balance** - Needed for game feel
3. **Daily/Weekly Challenges** - Engagement hooks
4. **Notification System** - Quality of life
5. **Achievement System** - Long-term goals
6. **Passive Stationing** - Depth feature

---

## Summary

Phase 1.5 adds polish and engagement without blocking core loop:

| System | Purpose |
|--------|---------|
| Tutorial | Smooth onboarding |
| Economy | Meaningful progression |
| Stationing | Idle depth |
| Notifications | Player convenience |
| Achievements | Long-term goals + flex |
| Challenges | Daily engagement |

All systems designed to respect player time - no FOMO, no pay-to-win, no mandatory daily login.
