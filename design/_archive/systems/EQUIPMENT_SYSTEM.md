# Equipment System - Dungeon Farmers

**6-slot equipment with set bonuses and strategic optimization**

---

## üéØ Core Philosophy

**Fair Acquisition. Strategic Depth. No Gacha.**

All equipment obtained through gameplay (expedition drops, dungeon farming, crafting). Set bonuses reward long-term collection goals. Equipment provides 30-40% of hero power.

---

## üì¶ Equipment Slots

### 6 Equipment Slots Per Hero

1. **Weapon** - Primary damage stat (+ATK)
2. **Armor** - Primary defense stat (+DEF, +HP)
3. **Helmet** - Balanced stats (+DEF, +HP)
4. **Boots** - Speed and utility (+SPD, +HP)
5. **Accessory 1** - Specialized bonuses (various)
6. **Accessory 2** - Specialized bonuses (various)

**Design Rationale**: 6 slots allow for complete 6-piece sets OR mixed 4-piece + 2-piece combinations for strategic flexibility.

---

## ‚≠ê Equipment Rarity

### Rarity Tiers

**Common (60%):**
- Base stats: +5-10 per stat
- No special effects
- Drops from: Trivial/Easy zones

**Uncommon (25%):**
- Base stats: +10-20 per stat
- Minor set bonuses available
- Drops from: Easy/Medium zones

**Rare (10%):**
- Base stats: +20-40 per stat
- Set bonuses (2-piece, 4-piece)
- Drops from: Medium/Hard zones, dungeons

**Epic (4%):**
- Base stats: +40-70 per stat
- Strong set bonuses (2-piece, 4-piece, 6-piece)
- Drops from: Hard/Very Hard zones, dungeons, raids

**Legendary (1%):**
- Base stats: +70-120 per stat
- Powerful set bonuses, unique effects
- Drops from: Elite zones, raids, crafting

**Mythic (<0.1%):**
- Base stats: +120-200 per stat
- Build-defining effects, ultimate set bonuses
- Drops from: Elite raids, special events, endgame crafting

---

## üé® Set Bonus System

### Set Structure

**2-Piece Bonus:**
- +10-15% stat boost (HP, ATK, DEF, or SPD)
- Simple, always useful

**4-Piece Bonus:**
- +20-30% stat boost
- **Special effect** (damage type, heal on hit, shield generation, etc.)

**6-Piece Bonus (Epic+ sets only):**
- +40-50% stat boost
- **Build-defining effect** (archetype transformation, ultimate abilities, massive synergies)

### Example Sets

#### Guardian's Oath (Tank Set - Epic)
**Pieces**: Weapon, Armor, Helmet, Boots, Accessory 1, Accessory 2

**2-Piece Bonus**:
- +10% Defense

**4-Piece Bonus**:
- +20% Defense
- +5% HP Regeneration per turn

**6-Piece Bonus**:
- +40% Defense
- **Unyielding Guardian**: When HP drops below 30%, gain shield equal to 50% max HP (once per expedition)

**Ideal For**: Tank heroes (Thrain, other Tank archetypes)

#### Shadow Stalker (Ranged DPS Set - Epic)
**Pieces**: Weapon, Armor, Helmet, Boots, Accessory 1, Accessory 2

**2-Piece Bonus**:
- +15% Attack

**4-Piece Bonus**:
- +25% Attack
- +10% Critical Hit Chance

**6-Piece Bonus**:
- +45% Attack
- **Assassinate**: Critical hits deal +100% damage and apply bleed effect

**Ideal For**: Ranged DPS heroes (Sylvana, Archers, Rangers)

#### Arcane Mastery (Caster Set - Legendary)
**Pieces**: Weapon, Armor, Helmet, Boots, Accessory 1, Accessory 2

**2-Piece Bonus**:
- +12% Magic Power

**4-Piece Bonus**:
- +28% Magic Power
- +15% Spell Effectiveness

**6-Piece Bonus**:
- +50% Magic Power
- **Elemental Overload**: Spells have 25% chance to cast twice

**Ideal For**: Caster heroes (Morrigan, Mages, Sorcerers)

---

## üìä Stat Ranges & Power Contribution

### Equipment Stat Ranges by Rarity

**Phase 1 MVP** (Common ‚Üí Epic), **Phase 2+** (Legendary ‚Üí Mythic)

#### Weapon (Primary: ATK)

| Rarity | ATK Range | Level Requirement | Drop Rate |
|--------|-----------|-------------------|-----------|
| Common | 10-20 | Level 1+ | 60% |
| Uncommon | 20-35 | Level 5+ | 25% |
| Rare | 35-55 | Level 15+ | 10% |
| Epic | 55-85 | Level 25+ | 4% |
| Legendary | 85-130 | Level 35+ | 0.8% |
| Mythic | 130-200 | Level 45+ | 0.2% |

#### Armor (Primary: DEF)

| Rarity | DEF Range | Level Requirement | Drop Rate |
|--------|-----------|-------------------|-----------|
| Common | 15-25 | Level 1+ | 60% |
| Uncommon | 25-40 | Level 5+ | 25% |
| Rare | 40-65 | Level 15+ | 10% |
| Epic | 65-100 | Level 25+ | 4% |
| Legendary | 100-155 | Level 35+ | 0.8% |
| Mythic | 155-240 | Level 45+ | 0.2% |

#### Helmet (Primary: HP)

| Rarity | HP Range | Level Requirement | Drop Rate |
|--------|-----------|-------------------|-----------|
| Common | 20-35 | Level 1+ | 60% |
| Uncommon | 35-60 | Level 5+ | 25% |
| Rare | 60-95 | Level 15+ | 10% |
| Epic | 95-145 | Level 25+ | 4% |
| Legendary | 145-225 | Level 35+ | 0.8% |
| Mythic | 225-350 | Level 45+ | 0.2% |

#### Boots (Primary: SPD)

| Rarity | SPD Range | Level Requirement | Drop Rate |
|--------|-----------|-------------------|-----------|
| Common | 5-10 | Level 1+ | 60% |
| Uncommon | 10-18 | Level 5+ | 25% |
| Rare | 18-28 | Level 15+ | 10% |
| Epic | 28-42 | Level 25+ | 4% |
| Legendary | 42-65 | Level 35+ | 0.8% |
| Mythic | 65-100 | Level 45+ | 0.2% |

#### Accessories (Balanced: Mixed Stats)

| Rarity | Stat Range (any combination) | Level Requirement | Drop Rate |
|--------|------------------------------|-------------------|-----------|
| Common | 8-15 total stats | Level 1+ | 60% |
| Uncommon | 15-25 total stats | Level 5+ | 25% |
| Rare | 25-40 total stats | Level 15+ | 10% |
| Epic | 40-65 total stats | Level 25+ | 4% |
| Legendary | 65-100 total stats | Level 35+ | 0.8% |
| Mythic | 100-160 total stats | Level 45+ | 0.2% |

**Example Accessory** (Rare):
- +15 ATK, +10 DEF, +5 SPD = 30 total stats (within 25-40 range)

### Equipment Power Contribution

**Power Calculation** (from HERO_SYSTEM.md):

```typescript
function calculateEquipmentPower(equipment: Equipment[]): number {
  let totalPower = 0;

  for (const item of equipment) {
    // Apply component weights (same as hero stats)
    const itemPower =
      (item.hp * 0.15) +
      (item.atk * 2.0) +
      (item.def * 1.5) +
      (item.spd * 1.0);

    totalPower += itemPower;
  }

  return Math.floor(totalPower);
}
```

**Equipment Power Ranges** (full 6-piece loadout):

| Rarity Tier | Total Equipment Power | % of Hero Power (Level 50) |
|-------------|----------------------|---------------------------|
| Full Common | 150-250 | ~10-17% |
| Full Uncommon | 250-400 | ~17-27% |
| Full Rare | 400-650 | ~27-43% |
| Full Epic | 650-1000 | ~43-67% |
| Full Legendary | 1000-1550 | ~67-103% |
| Full Mythic | 1550-2400 | ~103-160% |

**Design Philosophy**: Equipment contribution grows from ~20% (early game) to ~35-40% (endgame), ensuring both hero levels and gear matter significantly.

### Set Bonus Mechanics (Exact Multipliers)

**Phase 2+** - Set bonuses apply multiplicative stat boosts:

#### Bonus Tiers

| Pieces Equipped | Stat Multiplier | Special Effect | Power Impact |
|-----------------|-----------------|----------------|--------------|
| 2-piece | 1.10√ó (+10%) | None | +10% effective stats |
| 4-piece | 1.25√ó (+25%) | Unlocks | +25% stats + effect synergy |
| 6-piece | 1.50√ó (+50%) | Build-defining | +50% stats + powerful effect |

**Bonus Stacking** (multiplicative with base stats):

```typescript
function applySetBonus(
  baseStat: number,
  levelMultiplier: number,
  equippedPieces: number,
): number {
  // Base stat with level scaling
  let finalStat = baseStat * levelMultiplier;

  // Set bonus multiplier
  if (equippedPieces >= 6) {
    finalStat *= 1.50; // +50%
  } else if (equippedPieces >= 4) {
    finalStat *= 1.25; // +25%
  } else if (equippedPieces >= 2) {
    finalStat *= 1.10; // +10%
  }

  return Math.floor(finalStat);
}
```

**Concrete Example** (Volcanic Set on Level 50 Melee DPS):

| Set Pieces | Base ATK (L50) | Set Multiplier | Final ATK | Power Gain |
|------------|----------------|----------------|-----------|------------|
| 0 (no set) | 430 | 1.0√ó | 430 | Baseline |
| 2-piece | 430 | 1.10√ó | **473** | +43 ATK (+10%) |
| 4-piece | 430 | 1.25√ó | **538** | +108 ATK (+25%) |
| 6-piece | 430 | 1.50√ó | **645** | +215 ATK (+50%) |

**Special Effects by Tier**:

- **2-piece**: No special effect, only stat boost
- **4-piece**: Adds combat mechanic (e.g., "Fire Damage aura: burn enemies for 5% max HP per turn")
- **6-piece**: Build-defining effect (e.g., "Fire Damage aura + Lava Shield: absorb 30% of incoming damage")

**Visual Integration** (Phase 4+):
- 2-piece: Subtle glow/color tint on hero portrait
- 4-piece: Visible aura effect during combat animations
- 6-piece: Full visual transformation (armor appearance, particle effects, animations)

### Level Requirements & Upgrade Paths

#### Level Gating (Prevent Early Access)

| Rarity | Minimum Level | Philosophy |
|--------|---------------|------------|
| Common | Level 1+ | Starter gear |
| Uncommon | Level 5+ | Early progression |
| Rare | Level 15+ | Demo cap (free players can't use) |
| Epic | Level 25+ | Mid-game milestone |
| Legendary | Level 35+ | Late-game content |
| Mythic | Level 45+ | Endgame mastery |

**Design Rationale**: Rare gear at Level 15 creates natural "demo wall" - free players hit level cap before accessing higher tiers, incentivizing premium unlock.

#### Upgrade System (Phase 2+)

**Material Costs to Upgrade Rarity**:

| Upgrade Path | Gold Cost | Common Materials | Rare Materials | Epic Materials | Mythic Materials |
|--------------|-----------|------------------|----------------|----------------|------------------|
| Common ‚Üí Uncommon | 500 | 20 | - | - | - |
| Uncommon ‚Üí Rare | 2,000 | 50 | 10 | - | - |
| Rare ‚Üí Epic | 8,000 | 100 | 30 | 5 | - |
| Epic ‚Üí Legendary | 25,000 | 200 | 75 | 20 | 3 |
| Legendary ‚Üí Mythic | 75,000 | 400 | 150 | 50 | 10 |

**Upgrade Mechanics**:
- Upgrading preserves item stats (no RNG on stat rerolls)
- Set identity maintained (Shadow Stalker Rare ‚Üí Shadow Stalker Epic)
- Stat ranges shift to new rarity tier (e.g., 40 ATK Rare weapon ‚Üí 60 ATK Epic weapon)

**Example Upgrade**:
```
Shadow Stalker Sword (Rare)
+45 ATK, +5% Crit Chance

[UPGRADE TO EPIC]
Cost: 8,000 Gold, 100 Common, 30 Rare, 5 Epic materials

Result:
Shadow Stalker Sword (Epic)
+68 ATK, +8% Crit Chance
(Stats increased proportionally within Epic range)
```

See [ECONOMY_PROGRESSION.md](ECONOMY_PROGRESSION.md) for material drop rates and gold income/cost balance.

---

## üîß Equipment Acquisition

### Expedition Drops (Primary Source)
- **Zones**: Random equipment drops (rarity scales with difficulty)
- **Missions**: Guaranteed specific equipment (deterministic)
- **Dungeons**: Set piece farming (daily limit: 3 runs per dungeon)
- **Raids**: Epic/Legendary equipment (weekly reset)

### Crafting System (Guaranteed Outcomes)
**How it works:**
- Collect crafting materials from expeditions
- Combine materials + gold at Equipment Forge
- **Guaranteed specific item** (no RNG on crafting)

**Example Recipe - Dragon Slayer Sword (Epic)**:
```
Recipe Requirements:
‚úì Dragon Scale x10 (Have: 12)
‚úì Orichalcum Ore x5 (Have: 3) ‚Üê Need 2 more
‚úì Fire Crystal x8 (Have: 15)
‚úì 5,000 Gold (Have: 8,250)

Result: Dragon Slayer Sword (Epic Weapon)
+65 ATK, Fire Damage +30%
Part of Dragon Slayer Set (0/6 owned)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[CRAFT] (grayed out - missing Orichalcum Ore)
```

**Design Rationale**: Crafting provides deterministic path to specific gear. Farm materials from known sources instead of endless RNG drops.

### Alliance Shop (Alliance Points Currency)
- Rare/Epic set pieces available for Alliance Points
- Weekly rotation (different sets each week)
- Encourages alliance participation

---

## ‚öñÔ∏è Equipment Strategy

### Mixed Set Combinations
**Players aren't locked into 6-piece sets!**

**Example Optimization**:
- 4-piece Guardian's Oath (Tank bonuses)
- 2-piece Vitality (HP bonus from different set)
- **Result**: +20% DEF + 5% HP regen (from 4-piece) + +15% max HP (from 2-piece)

**Strategic Flexibility**: Mix and match for content-specific needs.

### Gear Score System
**Single number showing equipment power:**
```
Gear Score = Sum of all equipment stats
```

**Example**:
- Weapon (+50 ATK): 50 points
- Armor (+40 DEF, +30 HP): 70 points
- Helmet (+35 DEF, +25 HP): 60 points
- Boots (+20 SPD, +20 HP): 40 points
- Accessory 1 (+30 ATK): 30 points
- Accessory 2 (+25 DEF): 25 points
**Total Gear Score: 275**

**Power Contribution**: Gear Score √ó 0.8 added to hero power rating.

---

## üìä Progression Path

**Early Game (Player Level 1-10)**:
- Common/Uncommon drops from zones
- Focus on filling all 6 slots (any rarity)
- No set bonuses yet

**Mid Game (Player Level 10-25)**:
- Rare equipment from dungeons
- First 2-piece set bonuses achieved
- Strategic dungeon farming begins

**Late Game (Player Level 25-40)**:
- Epic equipment from raids
- 4-piece set bonuses achieved
- Crafting unlocks for targeted gear

**Endgame (Player Level 40+)**:
- Legendary/Mythic equipment
- 6-piece set bonuses for build-defining effects
- Perfect optimization for leaderboard pushing

---

**The Equipment System provides strategic depth through set bonuses, long-term collection goals, and multiple acquisition paths (drops, crafting, alliance shop) without predatory RNG mechanics.**

---

## üé≤ Phase 4: Advanced Itemization Systems

*Note: Post-launch equipment depth expansion for increased build diversity and replayability.*

### Affix System (Prefix & Suffix Modifiers)

**Availability**: Rare+ equipment only
**Mechanic**: Equipment can roll random prefix and/or suffix modifiers adding extra stats

#### Prefix Modifiers (Rare+)
Roll chance: 30% on Rare, 60% on Epic, 100% on Legendary/Mythic

**Offensive Prefixes**:
- **Brutal** (+15-25% ATK)
- **Precise** (+10-20% Crit Chance)
- **Swift** (+15-25% SPD)
- **Arcane** (+20-30% Magic Power)

**Defensive Prefixes**:
- **Fortified** (+15-25% DEF)
- **Guardian's** (+15-25% HP)
- **Warded** (+10-20% Magic Resistance)
- **Resilient** (+10-15% All Resistances)

**Utility Prefixes**:
- **Lucky** (+5-10% Gold/Loot Drop Rate)
- **Scholar's** (+10-20% XP Gain)
- **Efficient** (-10-15% Durability Loss)

#### Suffix Modifiers (Epic+)
Roll chance: 40% on Epic, 100% on Legendary/Mythic

**Elemental Suffixes**:
- **...of the Dragon** (+20% Fire Damage, +10% Fire Resistance)
- **...of the Storm** (+20% Lightning Damage, +10% Lightning Resistance)
- **...of Winter** (+20% Ice Damage, +10% Ice Resistance)

**Combat Suffixes**:
- **...of Precision** (+15% Crit Chance, +25% Crit Damage)
- **...of the Guardian** (+10% HP Regen, +15% DEF)
- **...of Haste** (+20% SPD, +10% Cooldown Reduction)

**Specialized Suffixes**:
- **...of Monster Hunting** (+15% Capture Rate, +10% Monster Material Drops)
- **...of Fortune** (+25% Rare Drop Chance, +10% Gold)
- **...of Mastery** (+20% Set Bonus Effectiveness)

#### Affix Rolling Rules
- **Rare**: 0-1 prefix, 0 suffix (30% prefix chance)
- **Epic**: 1 prefix (60% chance), 0-1 suffix (40% chance)
- **Legendary**: 1 prefix (100%), 1-2 suffixes (100% for 1, 30% for 2)
- **Mythic**: 1-2 prefixes (100% for 1, 50% for 2), 2 suffixes (100%)

**Stat Ranges**: All affixes roll within min-max range (e.g., Brutal: 15-25% ATK)

### Enchant Slot System

**Availability**: Legendary+ equipment only
**Mechanic**: Equipment has 0-2 random enchantment slots for customization

**Enchant Slot Distribution**:
- **Legendary**: 0 slots (40%), 1 slot (50%), 2 slots (10%)
- **Mythic**: 1 slot (40%), 2 slots (60%)

**Enchantment Types**:

**Stat Enchants** (Common):
- +50-100 HP
- +10-25 ATK
- +10-25 DEF
- +5-15 SPD

**Special Effect Enchants** (Rare):
- **Lifesteal**: 5-10% damage dealt as HP recovery
- **Thorns**: 10-20% damage reflected to attackers
- **Speed Burst**: +30% SPD for first 10 seconds of combat
- **Last Stand**: +50% all stats when below 25% HP

**Unique Enchants** (Epic):
- **Phoenix Heart**: Revive once per expedition at 30% HP (1% chance to roll)
- **Time Dilation**: Reduce all cooldowns by 20%
- **Capture Mastery**: +10% monster capture rate
- **Loot Magnetism**: +50% material drop quality

**Applying Enchants**:
- Requires **Enchanting Stone** (rare material from Mythic monster drops, Epic+ dungeons)
- Visit Enchanter NPC in town (unlocked at Level 30)
- Enchanting costs Gold (500-2000 based on enchant rarity)
- Can replace existing enchant (destroys old one)

**Enchant Reroll**:
- Cost: 1 **Reforge Crystal** (very rare material) + 1000 Gold
- Effect: Reroll enchant slot quality (Common ‚Üí Rare ‚Üí Epic)
- Limitation: Cannot reroll slot count, only enchant quality

### Set Tag RNG

**Mechanic**: Rare chance for non-set equipment to roll a set tag, enabling cross-class builds

**Set Tag Roll Chance**:
- Rare: 5% chance to roll random set tag
- Epic: 10% chance
- Legendary: 15% chance
- Mythic: 25% chance

**Effect**: Equipment gains set tag even if not originally part of that set
- Example: "Brutal Greatsword of the Dragon" (Epic, no set) rolls "Inferno Warlord" tag
- Now counts toward Inferno Warlord 2/4/6-piece bonuses

**Build Diversity Impact**:
- Allows mixing best-in-slot items from different sources
- Creates unique hybrid builds (e.g., Tank wearing Caster set pieces for mana)
- Increases equipment value (same item with set tag is more valuable)

### Item History Logs

**Mechanic**: Legendary+ equipment generates procedural backstory based on how it was acquired

**Story Elements**:
- **Origin**: "Forged in the Volcanic Depths" (dungeon where it dropped)
- **First Bearer**: "Wielded by [Hero Name] the [Archetype]" (hero who equipped it first)
- **Notable Achievement**: "Survived 50 expeditions without breaking" or "Slain Mythic Shadow Drake"
- **Quirk**: "Smells faintly of sulfur" or "Hums when danger approaches" (random flavor)

**Example Item History**:
```
Brutal Greatsword of the Dragon +25
Legendary Weapon | Set: None | Inferno Warlord Tag (5% roll)

=== ITEM HISTORY ===
Origin: Forged in the heart of Scorched Citadel (Epic Dungeon)
First Bearer: Kael the Tank (Level 45)
Notable Feat: Dealt killing blow to Mythic Volcanic Ogre
Enchanted: Phoenix Heart (Epic) - Revive once per expedition
Quirk: "Blade glows red when enemies are near"

Legacy Value: +15% resale price due to storied history
```

**Gameplay Benefits**:
- Cosmetic flavor and attachment to items
- +10-20% vendor resale value for items with achievements
- Potential future: Share item histories in Alliance chat

### Crafting Reforge System

**Mechanic**: Reroll affixes using rare materials

**Reforge Materials**:
- **Minor Reforge Stone**: Reroll prefix OR suffix (keeps one, rerolls other)
- **Major Reforge Stone**: Reroll all affixes (prefix + suffix)
- **Blessed Reforge Stone**: Reroll affixes with +10% chance for better tier

**Material Sources**:
- Rare dungeon drops (2-5% from Epic+ dungeons)
- Alliance shop (expensive, 300-800 Alliance Points)
- Disenchanting unwanted Legendary+ equipment

**Costs**:
- Minor Reforge: 1 stone + 500 Gold
- Major Reforge: 1 stone + 1500 Gold
- Blessed Reforge: 1 stone + 3000 Gold

**Limitations**:
- Cannot change base item type (Greatsword stays Greatsword)
- Cannot reroll set bonus (only affixes)
- Cannot reroll rarity (Rare stays Rare)

---

## See Also

- [HERO_SYSTEM.md](HERO_SYSTEM.md) - Equipment slots and power contribution mechanics
- [EXPEDITION_SYSTEM.md](EXPEDITION_SYSTEM.md) - Set bonuses for specific content types
- [MONSTER_DUNGEON_SYSTEM.md](MONSTER_DUNGEON_SYSTEM.md) - Dungeon farming for equipment sets
- [ECONOMY_PROGRESSION.md](ECONOMY_PROGRESSION.md) - Crafting costs and material progression
